---
title: "How to Deposit Points"
description: "Step-by-step guide to depositing off-chain points into Checkpoint"
---

# How to Deposit Points

This guide walks you through the complete deposit process: requesting a signature from the Oracle API and submitting your deposit transaction to the blockchain.

## Prerequisites

Before you start, you'll need:

- A wallet with some ETH for gas fees
- Your wallet address
- The Points Program ID you want to deposit to
- Access to the Oracle API (provided by the project)
- Web3 library (ethers.js, web3.js, or similar)

## Step 1: Request Oracle Signature

The first step is to call the Oracle API to get a cryptographic signature proving you have the points you claim.

### API Endpoint

```
POST https://oracle-api.checkpoint.exchange/signatures/deposit
```

### Request Body

```json
{
  "address": "0x742d35Cc6634C0532925a3b844Bc2e7a39f0d01e",
  "pointsId": 1
}
```

**Parameters:**

- `address`: Your wallet address (lowercase, with 0x prefix)
- `pointsId`: The ID of the points program you're depositing to

### Response

```json
{
  "success": true,
  "data": {
    "amount": "1000000000000000000",
    "signature": "0x...",
    "expiry": 1697654400
  }
}
```

**Response fields:**

- `amount`: Your points balance (in wei/base units)
- `signature`: The cryptographic proof (hex string starting with 0x)
- `expiry`: Unix timestamp when this signature expires (usually ~5 minutes from now)

### Code Example (TypeScript)

<CodeGroup>
```typescript TypeScript with fetch
async function requestDepositSignature(address: string, pointsId: number) {
  const response = await fetch('https://oracle-api.checkpoint.exchange/signatures/deposit', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      address: address.toLowerCase(),
      pointsId: pointsId
    })
  });

if (!response.ok) {
throw new Error(`Oracle API error: ${response.statusText}`);
}

const data = await response.json();

if (!data.success) {
throw new Error(`Oracle returned error: ${data.error}`);
}

return {
amount: data.data.amount,
signature: data.data.signature,
expiry: data.data.expiry
};
}

// Usage
const sig = await requestDepositSignature(
"0x742d35Cc6634C0532925a3b844Bc2e7a39f0d01e",
1
);
console.log(`You have ${sig.amount} points`);

````

```javascript JavaScript with fetch
async function requestDepositSignature(address, pointsId) {
  const response = await fetch('https://oracle-api.checkpoint.exchange/signatures/deposit', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      address: address.toLowerCase(),
      pointsId: pointsId
    })
  });

  const data = await response.json();
  return data.data;
}
````

```python Python
import requests

def request_deposit_signature(address, points_id):
    response = requests.post(
        'https://oracle-api.checkpoint.exchange/signatures/deposit',
        json={
            'address': address.lower(),
            'pointsId': points_id
        }
    )
    return response.json()['data']
```

</CodeGroup>

## Step 2: Prepare Deposit Transaction

Now that you have the signature, you need to call the Deposit contract to mint your NFT and tokens.

### Deposit Contract Interface

The function signature is:

```solidity
function deposit(
    uint256 pointsId,
    uint256 amount,
    uint256 expiry,
    bytes calldata signature
) external payable;
```

**Parameters:**

- `pointsId`: The points program ID (same as in step 1)
- `amount`: The amount of points (from signature response)
- `expiry`: The expiry timestamp (from signature response)
- `signature`: The cryptographic signature (from signature response)
- Value (ETH): A small fee (varies by project, usually ~0.001 ETH)

### Get Contract Details

You'll need:

- **Deposit Contract Address**: Check the project's documentation
- **Chain ID**: Ethereum, Polygon, etc. (check the project docs)
- **Deposit Fee**: Amount of native token to send (in wei)

### Code Example (TypeScript with ethers.js)

<CodeGroup>
```typescript TypeScript with ethers.js v6
import { ethers } from 'ethers';

// Contract ABI (minimal - only the deposit function)
const DEPOSIT_ABI = [
'function deposit(uint256 pointsId, uint256 amount, uint256 expiry, bytes signature) external payable'
];

async function submitDeposit(
signer,
depositContractAddress,
pointsId,
amount,
expiry,
signature,
depositFeeWei
) {
// Create contract instance
const depositContract = new ethers.Contract(
depositContractAddress,
DEPOSIT_ABI,
signer
);

// Call deposit function
const tx = await depositContract.deposit(
pointsId,
amount,
expiry,
signature,
{
value: depositFeeWei // Send ETH for the fee
}
);

// Wait for transaction to confirm
const receipt = await tx.wait();
console.log(`Deposit confirmed: ${receipt.transactionHash}`);
return receipt;
}

// Full example
async function main() {
const provider = new ethers.JsonRpcProvider('https://eth-rpc.example.com');
const wallet = new ethers.Wallet(process.env.PRIVATE_KEY, provider);

// Step 1: Get signature from Oracle
const sig = await requestDepositSignature(wallet.address, 1);

// Step 2: Submit deposit
const receipt = await submitDeposit(
wallet,
'0xDepositContractAddress',
1, // pointsId
sig.amount, // amount
sig.expiry, // expiry
sig.signature, // signature
ethers.parseEther('0.001') // depositFeeWei
);

console.log('Deposit successful!');
console.log(`TX: ${receipt.transactionHash}`);
}

````

```typescript TypeScript with web3.js
import Web3 from 'web3';

const web3 = new Web3('https://eth-rpc.example.com');

async function submitDeposit(
  privateKey,
  depositContractAddress,
  pointsId,
  amount,
  expiry,
  signature,
  depositFeeWei
) {
  const account = web3.eth.accounts.privateKeyToAccount(privateKey);
  web3.eth.accounts.wallet.add(account);

  const DEPOSIT_ABI = [
    {
      name: 'deposit',
      type: 'function',
      inputs: [
        { name: 'pointsId', type: 'uint256' },
        { name: 'amount', type: 'uint256' },
        { name: 'expiry', type: 'uint256' },
        { name: 'signature', type: 'bytes' }
      ]
    }
  ];

  const contract = new web3.eth.Contract(DEPOSIT_ABI, depositContractAddress);

  const tx = contract.methods.deposit(pointsId, amount, expiry, signature);

  const gas = await tx.estimateGas({ from: account.address, value: depositFeeWei });

  const data = tx.encodeABI();

  const signedTx = await web3.eth.accounts.signTransaction(
    {
      to: depositContractAddress,
      data: data,
      gas: gas,
      gasPrice: await web3.eth.getGasPrice(),
      value: depositFeeWei,
      from: account.address
    },
    privateKey
  );

  const receipt = await web3.eth.sendSignedTransaction(signedTx.rawTransaction);
  return receipt;
}
````

```javascript JavaScript (basic)
// Using ethers.js
import { ethers } from "ethers";

async function deposit(wallet, contractAddr, pointsId, oracleResponse, fee) {
  const contract = new ethers.Contract(
    contractAddr,
    ["function deposit(uint256,uint256,uint256,bytes) external payable"],
    wallet
  );

  const tx = await contract.deposit(
    pointsId,
    oracleResponse.amount,
    oracleResponse.expiry,
    oracleResponse.signature,
    { value: fee }
  );

  return await tx.wait();
}
```

</CodeGroup>

## Step 3: Verify the Deposit

After the transaction confirms, verify that:

1. **You received the NFT** (Soulbound deposit receipt)
2. **You received escrow tokens** (equal to your points amount)
3. **Your balance is correct**

### Code Example (Verification)

```typescript
import { ethers } from "ethers";

async function verifyDeposit(
  provider,
  depositReceiptAddress,
  escrowTokenAddress,
  userAddress,
  expectedAmount
) {
  // Check NFT ownership
  const nftABI = [
    "function ownerOf(uint256 tokenId) external view returns (address)",
  ];
  const nftContract = new ethers.Contract(
    depositReceiptAddress,
    nftABI,
    provider
  );

  const tokenId = ethers
    .toBigInt(ethers.toBeHex(userAddress).slice(2).padStart(40, "0"))
    .toString();
  const nftOwner = await nftContract.ownerOf(tokenId);

  if (nftOwner.toLowerCase() !== userAddress.toLowerCase()) {
    throw new Error("NFT not received");
  }
  console.log("✓ NFT received");

  // Check escrow token balance
  const erc20ABI = [
    "function balanceOf(address) external view returns (uint256)",
  ];
  const escrowContract = new ethers.Contract(
    escrowTokenAddress,
    erc20ABI,
    provider
  );

  const balance = await escrowContract.balanceOf(userAddress);

  if (balance < ethers.toBigInt(expectedAmount)) {
    throw new Error("Token balance mismatch");
  }
  console.log(`✓ Escrow tokens received: ${balance.toString()}`);

  console.log("Deposit verified successfully!");
}
```

## Common Errors & Solutions

### "Invalid Signature"

- **Cause**: Signature has expired or is invalid
- **Solution**: Request a fresh signature from the Oracle API

### "Deposits Paused"

- **Cause**: The project has paused deposits temporarily
- **Solution**: Check the project's status page or documentation

### "Insufficient ETH for Gas"

- **Cause**: Your wallet doesn't have enough ETH for transaction fees
- **Solution**: Add more ETH to your wallet

### "Already Deposited"

- **Cause**: This address already deposited to this program
- **Solution**: Most programs allow only one deposit per user. You can update your balance with `changePoints` instead

### "Invalid Points ID"

- **Cause**: The points ID doesn't exist or isn't active
- **Solution**: Verify you're using the correct points ID

## Complete End-to-End Example

<Tabs>
<Tab title="Full TypeScript Flow">
```typescript
import { ethers } from 'ethers';

// Configuration
const CONFIG = {
ORACLE_API: 'https://oracle-api.checkpoint.exchange',
RPC_URL: 'https://eth-rpc.example.com',
DEPOSIT_CONTRACT: '0x...',
DEPOSIT_FEE: '1000000000000000', // 0.001 ETH in wei
POINTS_ID: 1
};

// Step 1: Request Oracle Signature
async function getOracleSignature(address, pointsId) {
const response = await fetch(`${CONFIG.ORACLE_API}/signatures/deposit`, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({
address: address.toLowerCase(),
pointsId
})
});

const data = await response.json();
if (!data.success) throw new Error(data.error);
return data.data;
}

// Step 2: Submit Deposit
async function submitDeposit(wallet, signature) {
const depositABI = [
'function deposit(uint256 pointsId, uint256 amount, uint256 expiry, bytes signature) external payable'
];

const contract = new ethers.Contract(
CONFIG.DEPOSIT_CONTRACT,
depositABI,
wallet
);

const tx = await contract.deposit(
CONFIG.POINTS_ID,
signature.amount,
signature.expiry,
signature.signature,
{ value: CONFIG.DEPOSIT_FEE }
);

return await tx.wait();
}

// Main flow
async function main() {
// Setup
const provider = new ethers.JsonRpcProvider(CONFIG.RPC_URL);
const wallet = new ethers.Wallet(process.env.PRIVATE_KEY, provider);

console.log(`Depositing from: ${wallet.address}`);

// Step 1: Get signature
console.log('Requesting signature from Oracle...');
const signature = await getOracleSignature(wallet.address, CONFIG.POINTS_ID);
console.log(`Points to deposit: ${signature.amount}`);

// Step 2: Submit deposit
console.log('Submitting deposit transaction...');
const receipt = await submitDeposit(wallet, signature);
console.log(`✓ Confirmed: ${receipt.transactionHash}`);

console.log('\n✓ Deposit complete!');
console.log(`You should now have:`);
console.log(`  - 1 soulbound NFT`);
console.log(`  - ${signature.amount} escrow tokens`);
}

main().catch(console.error);

````
</Tab>

<Tab title="Full Python Flow">
```python
import requests
import json
from web3 import Web3

CONFIG = {
    'ORACLE_API': 'https://oracle-api.checkpoint.exchange',
    'RPC_URL': 'https://eth-rpc.example.com',
    'DEPOSIT_CONTRACT': '0x...',
    'DEPOSIT_FEE': Web3.to_wei(0.001, 'ether'),
    'POINTS_ID': 1
}

def get_oracle_signature(address, points_id):
    """Request signature from Oracle API"""
    response = requests.post(
        f"{CONFIG['ORACLE_API']}/signatures/deposit",
        json={
            'address': address.lower(),
            'pointsId': points_id
        }
    )
    data = response.json()
    if not data.get('success'):
        raise Exception(f"Oracle error: {data.get('error')}")
    return data['data']

def submit_deposit(w3, private_key, signature):
    """Submit deposit to blockchain"""
    account = w3.eth.account.from_key(private_key)

    deposit_abi = [
        {
            "name": "deposit",
            "type": "function",
            "inputs": [
                {"name": "pointsId", "type": "uint256"},
                {"name": "amount", "type": "uint256"},
                {"name": "expiry", "type": "uint256"},
                {"name": "signature", "type": "bytes"}
            ]
        }
    ]

    contract = w3.eth.contract(
        address=CONFIG['DEPOSIT_CONTRACT'],
        abi=deposit_abi
    )

    # Build transaction
    tx = contract.functions.deposit(
        CONFIG['POINTS_ID'],
        int(signature['amount']),
        signature['expiry'],
        signature['signature']
    ).build_transaction({
        'from': account.address,
        'value': CONFIG['DEPOSIT_FEE'],
        'gas': 200000,
        'gasPrice': w3.eth.gas_price,
        'nonce': w3.eth.get_transaction_count(account.address)
    })

    # Sign and send
    signed = account.sign_transaction(tx)
    tx_hash = w3.eth.send_raw_transaction(signed.rawTransaction)
    receipt = w3.eth.wait_for_transaction_receipt(tx_hash)

    return receipt

def main():
    w3 = Web3(Web3.HTTPProvider(CONFIG['RPC_URL']))
    private_key = os.environ['PRIVATE_KEY']
    account = w3.eth.account.from_key(private_key)

    print(f"Depositing from: {account.address}")

    # Get signature
    print("Requesting signature from Oracle...")
    signature = get_oracle_signature(account.address, CONFIG['POINTS_ID'])
    print(f"Points to deposit: {signature['amount']}")

    # Submit deposit
    print("Submitting deposit transaction...")
    receipt = submit_deposit(w3, private_key, signature)
    print(f"✓ Confirmed: {receipt['transactionHash'].hex()}")
    print("\n✓ Deposit complete!")

if __name__ == '__main__':
    main()
````

</Tab>
</Tabs>

## Next Steps

After successful deposit:

1. **Monitor your balance**: Check your NFT and token balances on the blockchain
2. **Start trading** (optional): Create or fill offers on the Market contract
3. **Track history**: Your NFT records all point changes on-chain
4. **Wait for TGE**: Once the token launches, settlement will begin

## Additional Resources

<CardGroup>
  <Card
    title="Market Trading"
    icon="chart-line"
    href="/technical-reference/interact-with-market"
  >
    Learn how to create and fill trading offers
  </Card>

  <Card
    title="Points Tokenization"
    icon="coins"
    href="/architecture/points-tokenization"
  >
    Understand the two-token model in detail
  </Card>

  <Card
    title="Oracle System"
    icon="certificate"
    href="/architecture/oracle-system"
  >
    Learn how signature verification works
  </Card>
</CardGroup>

## FAQ

<AccordionGroup>
  <Accordion title="Can I deposit more points later?">
    Most programs allow only one deposit per user. However, you can update your balance using `changePoints()` when you earn more points.
  </Accordion>

{" "}
<Accordion title="How long is the signature valid?">
  Signatures typically expire in 5 minutes. If it expires, request a fresh one
  from the Oracle API.
</Accordion>

{" "}
<Accordion title="What if I make a mistake?">
  If the transaction fails, you can try again. If it succeeds, you've completed
  your deposit. The blockchain transaction is immutable.
</Accordion>

{" "}
<Accordion title="Can I transfer my NFT?">
  No, the NFT is soulbound—it cannot be transferred. It stays locked to your
  address as proof of your deposit.
</Accordion>

  <Accordion title="Do I need to approve tokens first?">
    No. The deposit contract only mints tokens to you; it doesn't require pre-approval.
  </Accordion>
</AccordionGroup>
